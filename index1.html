<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Introduction to VHDL</title>
<style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #f9f9f9; }
    h1 { color: #2c3e50; }
    .question-box { background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 0 5px rgba(0,0,0,0.1); animation: fadeIn 0.5s ease; }
    .options { list-style-type: none; padding-left: 0; }
    .options li { margin-bottom: 10px; background: #f0f0f0; padding: 8px; border-radius: 5px; }
    .options label { cursor: pointer; display: block; }
    button { margin-top: 10px; padding: 8px 16px; background: #555; color: white; border: none; border-radius: 4px; cursor: pointer; }
    button:hover { background: #333; }
    #result { margin-top: 20px; font-size: 1.3em; font-weight: bold; }

    /* Badge styling */
    .badge {
        display: inline-flex;
        align-items: center;
        padding: 10px 16px;
        border-radius: 12px;
        font-size: 1.1em;
        margin-top: 15px;
        font-weight: bold;
        cursor: pointer;
        animation: popIn 0.6s ease forwards, glowPulse 1.5s infinite alternate;
    }
    .gold { background: linear-gradient(45deg, #ffd700, #ffea8a); color: black; box-shadow: 0 0 12px rgba(255, 215, 0, 0.7); }
    .silver { background: linear-gradient(45deg, #c0c0c0, #f0f0f0); color: black; box-shadow: 0 0 12px rgba(192, 192, 192, 0.7); }
    .bronze { background: linear-gradient(45deg, #cd7f32, #ffb36b); color: white; box-shadow: 0 0 12px rgba(205, 127, 50, 0.7); }
    .practice { background: linear-gradient(45deg, #e74c3c, #ff6b6b); color: white; box-shadow: 0 0 12px rgba(231, 76, 60, 0.7); }
    .badge span { margin-left: 8px; }

    @keyframes popIn {
        0% { transform: scale(0.5); opacity: 0; }
        80% { transform: scale(1.1); opacity: 1; }
        100% { transform: scale(1); }
    }
    @keyframes glowPulse {
        0% { box-shadow: 0 0 8px rgba(255,255,255,0.5); }
        100% { box-shadow: 0 0 20px rgba(255,255,255,0.9); }
    }

    /* Progress bar */
    #progressBar { width: 100%; background: #555; height: 20px; border-radius: 10px; margin-bottom: 15px; overflow: hidden; }
    #progressFill { height: 100%; width: 0; background: #999; transition: width 0.4s ease; }

    @keyframes fadeIn {
        from {opacity: 0;}
        to {opacity: 1;}
    }

    /* Popup feedback */
    #popup {
        display: none;
        position: fixed;
        top: 20%;
        left: 50%;
        transform: translateX(-50%);
        background: white;
        padding: 15px 20px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0,0,0,0.2);
        font-weight: bold;
        z-index: 1000;
    }
    .correct-msg { color: green; }
    .wrong-msg { color: red; }

    /* Timer */
    #timer { font-weight: bold; margin-bottom: 10px; font-size: 1.2em; }

    /* Mobile-friendly */
    @media (max-width: 600px) {
        .question-box { padding: 15px; font-size: 0.95em; }
        button { width: 100%; }
    }
</style>
</head>
<body>

<h1> Introduction to VHDL</h1>
<div id="progressBar"><div id="progressFill"></div></div>
<div id="timer">Time left: 10s</div>
<div id="quiz-container" class="question-box"></div>
<div id="result"></div>
<div id="popup"></div>

<!-- Sound effects -->
<audio id="correctSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_5c2b1957c6.mp3?filename=correct-answer-voice-105596.mp3" preload="auto"></audio>
<audio id="wrongSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_d6b4cf2c5e.mp3?filename=wrong-answer-buzzer-105572.mp3" preload="auto"></audio>

<!-- Confetti -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<script>
const questions = [
    {q: "What does an entity describe in VHDL?", o: ["The internal logic", "The I/O interface", "The testbench", "Simulation settings"], a: 1},
    {q: "Which keyword is used to describe the internal behavior of a circuit?", o: ["entity", "architecture", "port", "library"], a: 1},
    {q: "Which data type allows values 'U', 'X', '0', '1', 'Z', 'W', 'L', 'H', '-'?", o: ["bit", "std_logic", "integer", "unsigned"], a: 1},
    {q: "Which operator assigns a value to a signal?", o: [":=", "<=", "=>", "&"], a: 1},
    {q: "What is the default package for 'bit' type?", o: ["IEEE.std_logic_1164", "numeric_std", "standard", "std_logic_arith"], a: 2},
    {q: "Which operator merges two vectors into one?", o: ["and", "or", "&", "+"], a: 2},
    {q: "Which library is needed to use 'std_logic'?", o: ["library std;", "use IEEE.std_logic_1164.all;", "use std_logic.all;", "use logic.all;"], a: 1},
    {q: "What does 'sll' stand for in VHDL?", o: ["Shift Left Logical", "Shift Left Linear", "Shift Left Loop", "Shift Line Logic"], a: 0},
    {q: "Which operator gives the remainder with the sign of the divisor?", o: ["mod", "rem", "abs", "xor"], a: 0},
    {q: "Which operator returns the absolute value?", o: ["mod", "abs", "rem", "**"], a: 1},
    {q: "In 'unsigned' type, numbers are:", o: ["Only negative", "Only positive", "Non-negative integers", "Floating point"], a: 2},
    {q: "What is the result type of 'abs' on signed numbers?", o: ["std_logic", "signed", "integer", "bit_vector"], a: 1},
    {q: "What does 'rol' do?", o: ["Rotate Left", "Read Only Logic", "Right Output Load", "Reset Output Line"], a: 0},
    {q: "Which is NOT a logical operator in VHDL?", o: ["xor", "nand", "xnor", "sub"], a: 3},
    {q: "What is the output of '2 ** 3'?", o: ["5", "6", "8", "9"], a: 2},
    {q: "What is the generic keyword used for?", o: ["Assigning signals", "Declaring constants for flexibility", "Looping", "Importing packages"], a: 1},
    {q: "Which shift fills new positions with the leftmost bit?", o: ["sra", "sla", "sll", "rol"], a: 0},
    {q: "The 'rem' operator returns a remainder with the sign of:", o: ["Divisor", "Dividend", "Zero", "First operand only"], a: 1},
    {q: "Which of these is a valid concatenation of two 4-bit vectors?", o: ["vec1 and vec2", "vec1 & vec2", "vec1 or vec2", "vec1 + vec2"], a: 1},
    {q: "In VHDL, which is correct for initializing a signal?", o: ["signal s : std_logic := '0';", "signal s : std_logic <= '0';", "signal s = '0';", "s := '0';"], a: 0}
];

// Shuffle
function shuffleArray(arr) { return arr.sort(() => Math.random() - 0.5); }

let currentQuestion = 0;
let score = 0;
let timerInterval;
let timeLeft = 10;
let shuffledQuestions = [];

function startTimer() {
    clearInterval(timerInterval);
    timeLeft = 10;
    document.getElementById("timer").textContent = `Time left: ${timeLeft}s`;
    timerInterval = setInterval(() => {
        timeLeft--;
        document.getElementById("timer").textContent = `Time left: ${timeLeft}s`;
        if (timeLeft <= 0) {
            clearInterval(timerInterval);
            checkAnswer(true);
        }
    }, 1000);
}

function loadQuestion() {
    const q = shuffledQuestions[currentQuestion];
    let html = `<p><strong>Question ${currentQuestion + 1} of ${shuffledQuestions.length}</strong></p>`;
    html += `<p>${q.q}</p><ul class="options">`;
    q.o.forEach((opt, i) => {
        html += `<li><label><input type="radio" name="answer" value="${i}"> ${opt}</label></li>`;
    });
    html += `</ul>`;
    let btnText = (currentQuestion === shuffledQuestions.length - 1) ? "Submit" : "Next";
    html += `<button onclick="checkAnswer(false)">${btnText}</button>`;
    document.getElementById("quiz-container").innerHTML = html;
    document.getElementById("progressFill").style.width = ((currentQuestion) / shuffledQuestions.length) * 100 + "%";
    startTimer();
}

function showPopup(message, isCorrect) {
    const popup = document.getElementById("popup");
    popup.textContent = message;
    popup.className = isCorrect ? "correct-msg" : "wrong-msg";
    popup.style.display = "block";
    setTimeout(() => { popup.style.display = "none"; }, 1000);
}

function checkAnswer(autoSkip) {
    clearInterval(timerInterval);
    const selected = document.querySelector('input[name="answer"]:checked');
    let isCorrect = false;

    if (!selected && !autoSkip) {
        alert("Please select an answer before continuing.");
        startTimer();
        return;
    }

    if (selected && parseInt(selected.value) === shuffledQuestions[currentQuestion].a) {
        score++;
        isCorrect = true;
        document.getElementById("correctSound").play();
        showPopup("Correct!", true);
    } else {
        document.getElementById("wrongSound").play();
        let correctText = shuffledQuestions[currentQuestion].o[shuffledQuestions[currentQuestion].a];
        showPopup(`Wrong! Correct: ${correctText}`, false);
    }

    setTimeout(() => {
        currentQuestion++;
        if (currentQuestion < shuffledQuestions.length) {
            loadQuestion();
        } else {
            showResult();
        }
    }, 1000);
}

function showResult() {
    let badgeHTML = "";
    if (score === shuffledQuestions.length) {
        badgeHTML = `<div class="badge gold">üèÖ<span>Gold - Perfect!</span></div>`;
    } else if (score >= 15) {
        badgeHTML = `<div class="badge silver">ü•à<span>Silver - Great job!</span></div>`;
    } else if (score >= 10) {
        badgeHTML = `<div class="badge bronze">ü•â<span>Bronze - Good effort!</span></div>`;
    } else {
        badgeHTML = `<div class="badge practice">üìò<span>Keep Practicing!</span></div>`;
    }

    let bestScore = localStorage.getItem("bestVHDLScore") || 0;
    if (score > bestScore) {
        localStorage.setItem("bestVHDLScore", score);
        bestScore = score;
    }

    document.getElementById("quiz-container").innerHTML = "";
    document.getElementById("progressFill").style.width = "100%";
    document.getElementById("result").innerHTML =
        `You scored ${score} / ${shuffledQuestions.length} (Best: ${bestScore})<br>${badgeHTML}<br><br><button onclick="restartQuiz()">Retake Quiz</button>`;

    confetti({ particleCount: 120, spread: 80, origin: { y: 0.6 } });
}

function restartQuiz() {
    score = 0;
    currentQuestion = 0;
    shuffledQuestions = shuffleArray([...questions]);
    document.getElementById("result").innerHTML = "";
    loadQuestion();
}

// Start quiz
shuffledQuestions = shuffleArray([...questions]);
loadQuestion();
</script>

</body>
</html>



